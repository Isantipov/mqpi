<?xml version="1.0" encoding="utf-8" ?>
<log4net>
  <appender name="TextRollingFileAppender" type="log4net.Appender.FileAppender">
    <file value="/var/log/mqpi/text.log" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%utcdate{ISO8601}Z [%thread] %logger %-5level - %message %exception%newline" />
    </layout>
  </appender>

  <appender name="JsonRollingFileAppender" type="log4net.Appender.FileAppender">
    <file value="/var/log/mqpi/json_traces.log" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%message,%newline" />
    </layout>
  </appender>
  
    <appender name="ColoredConsoleAppender" type="log4net.Appender.ManagedColoredConsoleAppender">
      <mapping>
        <level value="ERROR" />
        <foreColor value="Red" />
      </mapping>
      <mapping>
        <level value="WARN" />
        <foreColor value="Yellow" />
      </mapping>
      <mapping>
        <level value="INFO" />
        <foreColor value="White" />
      </mapping>
      <mapping>
        <level value="DEBUG" />
        <foreColor value="Cyan" />
      </mapping>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%utcdate{ISO8601}Z [%thread] %logger %-5level - %message %exception%newline" />
      </layout>
    </appender>


    <root>
      <level value="INFO" />
      <appender-ref ref="ColoredConsoleAppender" />
      <appender-ref ref="TextRollingFileAppender" />
    </root>

    <logger name="TextHttpTracer" additivity="false">
      <level value="INFO" />
      <appender-ref ref="ColoredConsoleAppender" />
      <appender-ref ref="TextRollingFileAppender" />
    </logger>

  <logger name="JsonHttpTracer" additivity="false">
    <level value="INFO" />
    <appender-ref ref="JsonRollingFileAppender" />
  </logger>

</log4net>